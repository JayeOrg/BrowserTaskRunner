services:
    sitecheck:
        build:
            context: ../..
            dockerfile: stack/infra/Dockerfile
        environment:
            - SITE_EMAIL
            - SITE_PASSWORD
            - SITE_LOGIN_URL=${SITE_LOGIN_URL:-https://botc.app/}
            - SITE_CHECK_INTERVAL_MS=${SITE_CHECK_INTERVAL_MS:-300000}
            - ENABLE_VNC=${ENABLE_VNC:-true}
        ports:
            - "5900:5900"
        volumes:
            - chrome-data:/tmp/chrome-profile
            - ./alerts:/app/infra/alerts
            - ./logs:/app/infra/logs
        restart: on-failure

volumes:
    chrome-data:
