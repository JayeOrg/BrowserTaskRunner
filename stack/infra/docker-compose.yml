services:
    sitecheck:
        build:
            context: ../..
            dockerfile: stack/infra/Dockerfile
            args:
                - SOURCE_HASH=${SOURCE_HASH:-unknown}
        environment:
            - TASK_NAME
            - SITE_EMAIL
            - SITE_PASSWORD
            - SITE_CHECK_INTERVAL_MS=${SITE_CHECK_INTERVAL_MS:-300000}
            - ENABLE_VNC=${ENABLE_VNC:-true}
        ports:
            - "5900:5900"
        volumes:
            - chrome-data:/tmp/chrome-profile
            - ../../logs:/app/logs
        restart: on-failure

volumes:
    chrome-data:
